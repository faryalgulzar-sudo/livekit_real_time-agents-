{
  "version": "2.0",
  "default_language": "en",
  "states": {
    "start": "GREETING",
    "collecting": "COLLECTING",
    "confirming": "CONFIRMING",
    "medical_history": "MEDICAL_HISTORY",
    "document_upload": "DOCUMENT_UPLOAD",
    "document_questions": "DOCUMENT_QUESTIONS",
    "rag_mode": "RAG_MODE",
    "done": "DONE"
  },

  "greeting": {
    "prompt_en": "Hello! Welcome to our clinic. How are you doing today?",
    "prompt_ur": "Assalam o Alaikum! Hamari clinic mein khush aamdeed. Aap kaise hain aaj?"
  },

  "required_fields_order": [
    "full_name",
    "phone",
    "purpose_of_call"
  ],

  "fields": [
    {
      "key": "full_name",
      "type": "string",
      "required": true,
      "prompt_en": "This information is necessary to proceed. May I have your full name, please?",
      "prompt_ur": "Aagay barhne ke liye yeh information zaroori hai. Aap ka full name kya hai?"
    },
    {
      "key": "phone",
      "type": "string",
      "required": true,
      "prompt_en": "What is your phone number?",
      "prompt_ur": "Aap ka phone number kya hai?"
    },
    {
      "key": "purpose_of_call",
      "type": "string",
      "required": true,
      "prompt_en": "What is your purpose for calling today?",
      "prompt_ur": "Aaj aap kis purpose se call kar rahe hain?"
    }
  ],

  "medical_history_prompt": {
    "prompt_en": "I will show you some options on the screen. Do you have any medical history or previous reports to share? Please say yes or no.",
    "prompt_ur": "Main aapko screen par kuch options dikhaonga. Kya aapki koi medical history ya previous reports hain share karne ke liye? Yes ya No bolein."
  },

  "no_medical_history_response": {
    "prompt_en": "Okay, no problem. Let me proceed with your request.",
    "prompt_ur": "Theek hai, koi masla nahi. Main aapki request ke saath aagay barhta hun."
  },

  "upload_prompt": {
    "prompt_en": "Please upload your medical document using the upload button on your screen. I'll wait for you.",
    "prompt_ur": "Please apna medical document screen par upload button se upload karein. Main aapka intezaar karunga."
  },

  "conditional_rules": [
    {
      "id": "document_uploaded_questions",
      "when": {
        "field_equals": { "field": "files_uploaded", "value": true }
      },
      "then_fields_order": ["document_type", "document_date", "document_findings"],
      "fields": [
        {
          "key": "document_type",
          "type": "enum",
          "required": true,
          "prompt_en": "Thank you for uploading. Is this document an X-ray, a lab report, or a medical prescription?",
          "prompt_ur": "Upload karne ka shukriya. Yeh document X-ray hai, lab report hai, ya medical prescription?",
          "options": [
            { "value": "xray", "label_en": "X-ray" },
            { "value": "lab_report", "label_en": "Lab Report" },
            { "value": "prescription", "label_en": "Medical Prescription" },
            { "value": "other", "label_en": "Other" }
          ]
        },
        {
          "key": "document_date",
          "type": "string",
          "required": true,
          "prompt_en": "When was this document created? You can give an approximate date.",
          "prompt_ur": "Yeh document kab bana tha? Approximate date bata dein."
        },
        {
          "key": "document_findings",
          "type": "string",
          "required": true,
          "prompt_en": "In a few words, what did the doctor say about this document or what were the findings?",
          "prompt_ur": "Chand alfaaz mein bataein, doctor ne is document ke baare mein kya kaha ya kya findings theen?"
        }
      ]
    }
  ],

  "confirmation": {
    "prompt_en": "Let me confirm your details: Name: {full_name}, Phone: {phone}, Purpose: {purpose_of_call}. Is this correct?",
    "prompt_ur": "Aapki details confirm karta hun: Name: {full_name}, Phone: {phone}, Purpose: {purpose_of_call}. Theek hai?"
  },

  "rag_mode_prompt": {
    "prompt_en": "Thank you! Your information has been saved. Now you can ask me any questions about our clinic services, timings, or any other information you need.",
    "prompt_ur": "Shukriya! Aapki information save ho gayi hai. Ab aap mujh se clinic services, timings, ya koi bhi information ke baare mein sawal pooch sakte hain."
  }
}
